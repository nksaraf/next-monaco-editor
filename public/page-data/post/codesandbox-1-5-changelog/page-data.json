{"componentChunkName":"component---src-templates-post-js","path":"/post/codesandbox-1-5-changelog","webpackCompilationHash":"43a07f76784e304bf1a0","result":{"data":{"blogPost":{"fields":{"authors":["Ives van Hoorne"],"date":"2017-08-16T00:00:00.000Z","description":"CodeSandbox 1.5 has landed, with monaco-editor, offline support, new error reporting and much more!","photo":"https://avatars0.githubusercontent.com/u/587016?s=460&v=4","slug":"codesandbox-1-5-changelog","title":"CodeSandbox 1.5 Changelog"},"frontmatter":{"banner":{"publicURL":"/static/banner-c448dea024ec743aa18934e5b8671fa6.png"}},"html":"<p>This is <a href=\"https://codesandbox.io\">CodeSandbox</a> 1.5! I don't know how to call all\nupdates anymore, so I decided to version CodeSandbox with arbitrary numbers.</p>\n<p>This is a big update, I rewrote the editor, the preview screen and the packager.\nAll these changes made the deployment quite exciting, but it's online now. Let's\nget started!</p>\n<section>\n<h2 id=\"editor\"><a href=\"#editor\" aria-label=\"editor permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Editor</h2>\n<p>The editor has been rewritten to use the\n<a href=\"https://github.com/Microsoft/monaco-editor\"><code class=\"language-text\">monaco-editor</code></a>. This editor is an\nextracted version of the <a href=\"https://github.com/Microsoft/vscode\">VS Code</a> editor,\nand thus <em>really</em> powerful.</p>\n<h4 id=\"peek-definition-go-to-definition-find-all-references\"><a href=\"#peek-definition-go-to-definition-find-all-references\" aria-label=\"peek definition go to definition find all references permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Peek Definition, Go to Definition, Find all References</h4>\n<p>The really cool thing about <code class=\"language-text\">monaco-editor</code> is that you get the core editor\nfeatures (Go to Definition, Peek Definition, etc.) of vscode for free. The only\nthing you need to do is wiring everything up correctly, I created a separate\nbuild of the Monaco editor for better cross file integration in CodeSandbox.</p>\n<p><img src=\"/bd2b54df0a7deb240af1b191f74e7f7d/0.gif\" alt=\"Peek Definition, Go to Definition, Find all References\"></p>\n<h4 id=\"automatic-type-acquisition\"><a href=\"#automatic-type-acquisition\" aria-label=\"automatic type acquisition permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Automatic Type Acquisition</h4>\n<p>Not only navigation gets easier, the <code class=\"language-text\">monaco-editor</code> has\n<a href=\"https://code.visualstudio.com/docs/editor/intellisense\">IntelliSense</a> for\nJavaScript and <a href=\"https://github.com/Microsoft/TypeScript\">TypeScript</a> built in!\nThat's <strong>really</strong> cool, and even better if you have the typings of dependencies.\nThat's why I added 'Automatic Type Acquisition', this means that for every\n'installed' dependency we search and download the type definitions on\n<a href=\"https://unpkg.com\">https://unpkg.com</a>. This way you get autocomplete for\nlibraries.</p>\n<p><img src=\"/61e1b2fa488c934f2e825dfe134af2ce/1.gif\" alt=\"Autocompletions for many dependencies\"></p>\n<h4 id=\"eslint-prettier-emmetio\"><a href=\"#eslint-prettier-emmetio\" aria-label=\"eslint prettier emmetio permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ESLint, Prettier, Emmet.io</h4>\n<p>I ported almost all existing editor features over. This means that you have\n<a href=\"https://github.com/eslint/eslint\">ESLint</a>,\n<a href=\"https://github.com/prettier/prettier\">Prettier</a> and\n<a href=\"https://github.com/emmetio/emmet\">Emmet.io</a> built in in the editor!\nUnfortunately I had to drop <a href=\"https://github.com/vim/vim\">Vim</a> Mode, you can\nstill enable this, but this will disable Monaco and enable\n<a href=\"https://github.com/codemirror/CodeMirror\">CodeMirror</a>.</p>\n<p><img src=\"/7168764f6d474bc8b634114a8f73f3f0/2.gif\" alt=\"Emmet.io &#x26; ESLint &#x26; Prettier\"></p>\n<p>I'm really happy with the new editor, and want to state that this could never\nwork without <code class=\"language-text\">monaco-editor</code>, TypeScript, unpkg, Emmet.io, ESLint and Prettier.\nI want to explicitly thank these tools, the only thing I had to do is wire\neverything up and patch some integrations.</p>\n</section>\n<section>\n<h2 id=\"react-error-overlay\"><a href=\"#react-error-overlay\" aria-label=\"react error overlay permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>react-error-overlay</h2>\n<p>We have another tool that made CodeSandbox much better, namely\n<a href=\"https://github.com/facebook/create-react-app/tree/master/packages/react-error-overlay\"><code class=\"language-text\">react-error-overlay</code></a>\nby <a href=\"https://github.com/facebook/create-react-app\"><code class=\"language-text\">create-react-app</code></a>! Error\nhandling in CodeSandbox has been redone, and thanks to <code class=\"language-text\">react-error-overlay</code> we\nnow support async errors and deep linked errors + have a beautiful error\noverlay. Furthermore I rewrote the error handling of the preview so errors now\nshow up in the <em>right</em> file.</p>\n<p><img src=\"/57353a387a9e85e31c9fc99a4a28679c/3.gif\"></p>\n<p>CodeSandbox not only shows errors, it also offers suggestions for known errors.\nIn the example above <code class=\"language-text\">DeepComponent.js</code> is importing <code class=\"language-text\">RawComponent</code>, notice that\nthere is no extension. This will throw an <code class=\"language-text\">Invalid Tag</code> error. We can easily\ndetect this and give the suggestion to rename the file. I'm thinking of writing\nan API that allows library developers to add suggestions for errors for their\nspecific library.</p>\n<p><iframe src=\"https://codesandbox.io/embed/241mz6qwmr?fontsize=14&view=split\" style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\"></iframe></p>\n<!-- Error overlay (suggestions and error navigation don't work here as you're not in the editor) -->\n</section>\n<section>\n<h2 id=\"external-frames\"><a href=\"#external-frames\" aria-label=\"external frames permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>External Frames</h2>\n<p>It's now possible to open sandboxes in an external url. You can use this to see\nthe preview in a separate window during development, or to share a fullscreen\nversion of your sandbox with friends. Note that this external frame is nowhere\nnear a production version, I'm working together with <a href=\"https://zeit.co\">ZEIT</a> to\nintegrate 'Deploy to <a href=\"https://zeit.co/now\">Now</a>' so you can deploy a production\nversion automagically âœ¨.</p>\n<p><img src=\"/d45b4e265029f033b2bff0b9bbeb5a70/4.gif\" alt=\"External frames!\"></p>\n<p>The external sandbox also works offline. Which takes me to the next point...</p>\n</section>\n<section>\n<h2 id=\"offline-support\"><a href=\"#offline-support\" aria-label=\"offline support permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Offline Support</h2>\n<p>CodeSandbox is now backed by\n<a href=\"https://en.wikipedia.org/wiki/Progressive_web_applications#Service_workers\">service workers</a>.\nThis means that you can open the editor and the preview while offline and see\nCodeSandbox instead of a\n<a href=\"https://blog.google/products/chrome/chrome-dino\">dinosaur</a> ðŸ™ƒ. Note that\noffline support is currently limited, you cannot save your sandboxes offline yet\n(you can still download though). I need to make some required changes to the\nserver to be able to do this. You are able to edit sandboxes though! This\nfeature is really an improvement in speed, it will save network roundtrips for\ne.g. dependencies.</p>\n<p><img src=\"/10618fcf78b658eee0f43888181f3315/5.gif\" alt=\"No Dinosaur!\"></p>\n</section>\n<section>\n<h2 id=\"dependency-packager-rewrite\"><a href=\"#dependency-packager-rewrite\" aria-label=\"dependency packager rewrite permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dependency Packager Rewrite</h2>\n<p>The packager of the dependencies has been rewritten. It's now hosted as a\nserverless solution, which means that it can scale (practically) indefinitely.\nWe also saw a nice improvement in speed, we saw improvements between 40%-700%(!)\nin response time.</p>\n<p>A new feature that comes with the new packager is that we support version ranges\ninstead besides absolute versions. You will be able to install <code class=\"language-text\">react@next</code> for\nexample, and it will update automatically as\n<a href=\"https://github.com/facebook/react\">React</a> updates. This functionality will be\ndeployed somewhere this week, I need to change some server logic first.</p>\n<p>After working with <a href=\"https://serverless.com\">Serverless</a>, I have to say that I'm\n<em>really</em> impressed by how it works in practice. Our hosting costs went down from\n~$50 per month to a projected cost of $0.03 per month + we are now faster, more\nscalable and deployment is a breeze. I will write a post about this when I find\nthe time.</p>\n<p><em>NOTE: The packager has been rolled back for now, some package combinations\ncouldn't be loaded because of disk space limitations, it's solvable.</em></p>\n</section>\n<section>\n<h2 id=\"thanks\"><a href=\"#thanks\" aria-label=\"thanks permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Thanks</h2>\n<p>You can see a trend in these features, every feature makes heavy use of some\nexisting technology. It saved me <em>tons</em> of time, and I want to specifically list\nanother thank you to the authors that made this possible.<br>\nThanks to:</p>\n<ul>\n<li>The <a href=\"https://github.com/Microsoft/vscode\">VS Code</a> team, for taking the effort\nto extract <a href=\"https://github.com/Microsoft/monaco-editor\"><code class=\"language-text\">monaco-editor</code></a> and\nbeing open source. This is <strong>really</strong> valuable for the online editor movement.</li>\n<li><a href=\"https://unpkg.com\">https://unpkg.com</a> for allowing us &#x26; making it easy to\ndownload typings automatically from npm.</li>\n<li><a href=\"https://github.com/eslint/eslint\">ESLint</a>,\n<a href=\"https://github.com/prettier/prettier\">Prettier</a> and\n<a href=\"https://github.com/emmetio/emmet\">Emmet.io</a> for not only making these\nvaluable productivity boost tools, but also for keeping them compatible with\nthe browser.</li>\n<li>Everyone behind\n<a href=\"https://github.com/facebook/create-react-app\"><code class=\"language-text\">create-react-app</code></a>, and\nspecifically\n<a href=\"https://github.com/facebook/create-react-app/tree/master/packages/react-error-overlay\"><code class=\"language-text\">react-error-overlay</code></a>.\nImplementing this started as a joke, but turned out much easier than I\nexpected and actually went through.</li>\n<li><a href=\"https://github.com/GoogleChrome/sw-precache\"><code class=\"language-text\">sw-precache</code></a>, they made\nimplementing offline support a breeze. Their config is superb.</li>\n<li><a href=\"https://serverless.com\">Serverless</a> for their work in making serverless\ndevelopment and deployment easier &#x26; more accessible. They're doing a very\nimportant job and are doing it really well.</li>\n</ul>\n</section>"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"34642af0-48e3-5a5b-aab0-1336be0fbb35"}}}